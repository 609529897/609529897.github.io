<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å‰ç«¯ Cache</title>
    <url>/2020/05/30/Cache/</url>
    <content><![CDATA[<h2 id="å‰ç«¯ç¼“å­˜-åç«¯ç¼“å­˜"><a href="#å‰ç«¯ç¼“å­˜-åç«¯ç¼“å­˜" class="headerlink" title="å‰ç«¯ç¼“å­˜/åç«¯ç¼“å­˜"></a>å‰ç«¯ç¼“å­˜/åç«¯ç¼“å­˜</h2><p>åŸºæœ¬çš„ç½‘ç»œè¯·æ±‚åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ <code>è¯·æ±‚</code>ã€<code>å¤„ç†</code>ã€<code>å“åº”</code>ã€‚</p>
<p>è€Œåç«¯ç¼“å­˜ä¸»è¦é›†ä¸­åœ¨ <code>å¤„ç†</code> æ­¥éª¤ï¼Œé€šè¿‡ä¿ç•™æ•°æ®åº“è¿æ¥æˆ–è€…ä¿å­˜å¤„ç†ç»“æœæ¥ç¼©çŸ­å¤„ç†æ—¶é—´å°½å¿«è¿›å…¥â€œå“åº”â€æ­¥éª¤ã€‚</p>
<p>è€Œå‰ç«¯ç¼“å­˜é‚£å°±é›†ä¸­åœ¨ <code>è¯·æ±‚</code> å’Œ <code>å“åº”</code> æ­¥éª¤ï¼Œå“åº”éœ€è¦è·Ÿåç«¯å…±åŒé…åˆã€‚æµè§ˆå™¨å¯ä»¥é€šè¿‡å­˜å‚¨ç»“æœçš„æ–¹å¼çœå»å‘é€</p>
<p>è¯·æ±‚çš„æ­¥éª¤ï¼Œå“åº”é˜¶æ®µå¯ä»¥å‡å°‘å“åº”å†…å®¹æ¥ç¼©çŸ­ä¼ è¾“æ—¶é—´ã€‚</p>
<p><strong>ç¼“å­˜çš„åˆ†ç±»</strong></p>
<p>æŒ‰ç¼“å­˜ä½ç½®ï¼š</p>
<ul>
<li>memory cache  å†…å­˜ç¼“å­˜</li>
<li>disk cache          ç¡¬ç›˜ç¼“å­˜</li>
<li>Service Worker  Cache Storage</li>
</ul>
<p>æŒ‰å¤±æ•ˆç­–ç•¥ï¼š</p>
<ul>
<li>å¼ºç¼“å­˜                  Cache-Control, Expires</li>
<li>åå•†ç¼“å­˜               Last-Modified &amp; If-Modified-Since, Etag &amp; If-None-Match</li>
</ul>
<p>Cache-Control å¸¸ç”¨çš„å€¼</p>
<ul>
<li><code>max-age</code>ï¼šå³æœ€å¤§æœ‰æ•ˆæ—¶é—´</li>
<li><code>must-revalidate</code>ï¼šå¦‚æœè¶…è¿‡äº† <code>max-age</code> çš„æ—¶é—´ï¼Œæµè§ˆå™¨å¿…é¡»å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒéªŒè¯èµ„æºæ˜¯å¦è¿˜æœ‰æ•ˆã€‚</li>
<li><code>no-cache</code>ï¼šè™½ç„¶å­—é¢æ„æ€æ˜¯â€œä¸è¦ç¼“å­˜â€ï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯è¦æ±‚å®¢æˆ·ç«¯ç¼“å­˜å†…å®¹çš„ï¼Œåªæ˜¯æ˜¯å¦ä½¿ç”¨è¿™ä¸ªå†…å®¹ç”±åç»­çš„å¯¹æ¯”æ¥å†³å®šã€‚</li>
<li><code>no-store</code>: çœŸæ­£æ„ä¹‰ä¸Šçš„â€œä¸è¦ç¼“å­˜â€ã€‚æ‰€æœ‰å†…å®¹éƒ½ä¸èµ°ç¼“å­˜ï¼ŒåŒ…æ‹¬å¼ºåˆ¶å’Œå¯¹æ¯”ã€‚</li>
<li><code>public</code>ï¼šæ‰€æœ‰çš„å†…å®¹éƒ½å¯ä»¥è¢«ç¼“å­˜ (åŒ…æ‹¬å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨ï¼Œ å¦‚ CDN)</li>
<li><code>private</code>ï¼šæ‰€æœ‰çš„å†…å®¹åªæœ‰å®¢æˆ·ç«¯æ‰å¯ä»¥ç¼“å­˜ï¼Œä»£ç†æœåŠ¡å™¨ä¸èƒ½ç¼“å­˜ã€‚é»˜è®¤å€¼ã€‚</li>
</ul>
<blockquote>
<p><strong>Cache-control çš„ä¼˜å…ˆçº§é«˜äº Expires</strong>ï¼Œä¸ºäº†å…¼å®¹ HTTP/1.0 å’Œ HTTP/1.1ï¼Œå®é™…é¡¹ç›®ä¸­ä¸¤ä¸ªå­—æ®µæˆ‘ä»¬éƒ½ä¼šè®¾ç½®ã€‚</p>
</blockquote>
<p>å½“æµè§ˆå™¨è¦è¯·æ±‚èµ„æºæ—¶</p>
<ol>
<li><p>è°ƒç”¨ Service Worker çš„ <code>fetch</code> äº‹ä»¶å“åº”</p>
</li>
<li><p>æŸ¥çœ‹ memory cache</p>
</li>
<li><p>æŸ¥çœ‹ disk cacheã€‚è¿™é‡Œåˆç»†åˆ†ï¼š</p>
</li>
<li><ul>
<li>å¦‚æœæœ‰å¼ºåˆ¶ç¼“å­˜ä¸”æœªå¤±æ•ˆï¼Œåˆ™ä½¿ç”¨å¼ºåˆ¶ç¼“å­˜ï¼Œä¸è¯·æ±‚æœåŠ¡å™¨ã€‚è¿™æ—¶çš„çŠ¶æ€ç å…¨éƒ¨æ˜¯ 200</li>
</ul>
</li>
<li><ul>
<li>å¦‚æœæœ‰å¼ºåˆ¶ç¼“å­˜ä½†å·²å¤±æ•ˆï¼Œä½¿ç”¨å¯¹æ¯”ç¼“å­˜ï¼Œæ¯”è¾ƒåç¡®å®š 304 è¿˜æ˜¯ 200</li>
</ul>
</li>
<li><p>å‘é€ç½‘ç»œè¯·æ±‚ï¼Œç­‰å¾…ç½‘ç»œå“åº”</p>
</li>
<li><p>æŠŠå“åº”å†…å®¹å­˜å…¥ disk cache (å¦‚æœ HTTP å¤´ä¿¡æ¯é…ç½®å¯ä»¥å­˜çš„è¯)</p>
</li>
<li><p>æŠŠå“åº”å†…å®¹ <strong>çš„å¼•ç”¨</strong> å­˜å…¥ memory cache (æ— è§† HTTP å¤´ä¿¡æ¯çš„é…ç½®)</p>
</li>
<li><p>æŠŠå“åº”å†…å®¹å­˜å…¥ Service Worker çš„ Cache Storage (å¦‚æœ Service Worker çš„è„šæœ¬è°ƒç”¨äº† <code>cache.put()</code>)</p>
</li>
</ol>
<blockquote>
<p>åŸæ–‡ï¼š<a href="https://zhuanlan.zhihu.com/p/44789005" target="_blank" rel="noopener">å°è˜‘è‡å“¥å“¥</a></p>
</blockquote>
]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>JS äº‹ä»¶è®¢é˜…æ¨¡å¼å®ç°</title>
    <url>/2020/05/25/EventFuc/</url>
    <content><![CDATA[<p><strong>äº‹ä»¶è®¢é˜…æ¨¡å¼</strong></p>
<p>ä½ ä»æ·˜å®ä¸Šé€‰è´­äº†ä¸€ä»¶è¡£æœï¼Œä½†æ˜¯ä½ ç©¿çš„å°ºç åˆšå¥½æ–­è´§ï¼Œåº—å‘˜å‘ä½ ä¿è¯ä¼šä¸Šè´§ã€‚è¿™æ—¶ä½ å¯¹åº—å‘˜è¯´å½“è¿™ä»¶è¡£æœæœ‰æˆ‘å°ºç çš„æ—¶å€™ç»™æˆ‘å‘é€ä¿¡æ¯ï¼ˆè®¢é˜… listenï¼‰ã€‚è¿‡äº†å‡ å¤©æ–°è´§ä¸Šæ¶ï¼Œåº—å‘˜é€šçŸ¥äº†æ‰€æœ‰çš„è®¢é˜…çš„ç”¨æˆ·æ–°è´§ä¸Šæ¶äº†ï¼ˆå‘å¸ƒtriggerï¼‰ã€‚è¿™å°±æ˜¯äº‹ä»¶è®¢é˜…çš„é€»è¾‘äº†ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å–æ¶ˆè®¢é˜…ï¼ˆå–æ¶ˆè®¢é˜… removeï¼‰ã€‚ä¸‹é¢ä»£ç æ˜¯äº‹ä»¶è®¢é˜…æ¨¡å¼çš„ç®€å•JSå®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> Event = &#123;<br>    <span class="hljs-comment">// å­˜å‚¨è®¢é˜…ä¿¡æ¯</span><br>    list: &#123;&#125;,<br>    <span class="hljs-comment">// è®¢é˜…</span><br>    listen: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, fn</span>) </span>&#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.list[key]) &#123;<br>            <span class="hljs-keyword">this</span>.list[key] = []<br>        &#125;<br>        <span class="hljs-keyword">this</span>.list[key].push(fn)<br>    &#125;,<br>    <span class="hljs-comment">// å‘å¸ƒ</span><br>    trigger: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>        <span class="hljs-keyword">let</span> key = <span class="hljs-built_in">Array</span>.prototype.shift.call(<span class="hljs-built_in">arguments</span>)<br>        <span class="hljs-keyword">let</span> fns = <span class="hljs-keyword">this</span>.list[key]<br>        <span class="hljs-keyword">if</span> (!fns || fns.length === <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>, fn; fn = <span class="hljs-keyword">this</span>.list[i++];) &#123;<br>            fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>)<br>        &#125;<br>    &#125;,<br>    <span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span><br>    remove: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">key, fn</span>) </span>&#123;<br>        fns = <span class="hljs-keyword">this</span>.list[key]<br>        <span class="hljs-keyword">if</span> (!fns) &#123; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> &#125;<br>        <span class="hljs-comment">// æ²¡æœ‰æŒ‡å®šå¯¹è±¡ï¼Œé»˜è®¤å…¨å–æ¶ˆ</span><br>        <span class="hljs-keyword">if</span> (!fn) &#123;<br>            fns &amp;&amp; (fns.length = <span class="hljs-number">0</span>)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = fns.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span> ;i--) &#123;<br>                <span class="hljs-keyword">if</span> (fns[i] === fn) &#123;<br>                    fns.splice(i, <span class="hljs-number">1</span>)<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;,<br>    <span class="hljs-comment">// ç»™æ™®é€šå¯¹è±¡æ·»åŠ ä»¥ä¸Šæ–¹æ³•</span><br>    addEvent: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>) </span>&#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i <span class="hljs-keyword">in</span> Event) &#123;<br>            obj[i] = Event[i]<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>ç¤ºä¾‹</strong></p>
<p>Ajax è¯·æ±‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ä¼ ç»Ÿå†™æ³•ï¼Œä»£ç å°±éå¸¸è€¦åˆ</span><br>$.ajax(<span class="hljs-string">'http://127.0.0.1/index.php'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;<br>    rendedData(data);  <span class="hljs-comment">// æ¸²æŸ“æ•°æ®</span><br>    doAnimate(data);  <span class="hljs-comment">// å®ç°åŠ¨ç”» </span><br>&#125;);<br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// äº‹ä»¶è®¢é˜…æ¨¡å¼ï¼Œå®ç°ä»£ç çš„åˆ†ç¦»</span><br>$.ajax(â€œhttp:<span class="hljs-comment">//127.0.0.1/index.phpâ€,function(data)&#123;</span><br>    Obj.trigger(<span class="hljs-string">'success'</span>,data);  <span class="hljs-comment">// å‘å¸ƒè¯·æ±‚æˆåŠŸåçš„æ¶ˆæ¯</span><br>&#125;);<br><span class="hljs-comment">// ä¸‹é¢æˆ‘ä»¬æ¥è®¢é˜…æ­¤æ¶ˆæ¯ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨è®¢é˜…æ¸²æŸ“æ•°æ®è¿™ä¸ªæ¶ˆæ¯ï¼›</span><br>Obj.listen(<span class="hljs-string">'success'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;<br>   renderData(data);<br>&#125;);<br><span class="hljs-comment">// è®¢é˜…åŠ¨ç”»è¿™ä¸ªæ¶ˆæ¯</span><br>Obj.listen(<span class="hljs-string">'success'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>&#123;<br>   doAnimate(data); <br>&#125;);<br></code></pre></td></tr></table></figure>

<p>æ¨¡å—é—´é€šä¿¡</p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!doctype <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-comment">&lt;!--è®¢é˜…æ¨¡å¼æ¨¡å—--&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"global.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br> <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"count"</span>&gt;</span>click<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"showcount"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span> = <span class="hljs-string">"a.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span> = <span class="hljs-string">"b.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// a.js</span><br><span class="hljs-keyword">let</span> a = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-keyword">var</span> count = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">var</span> button = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"count"</span>);<br>    button.onclick = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        Event.trigger(<span class="hljs-string">"add"</span>,count++);<br>    &#125;<br>&#125;)();<br></code></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// b.js</span><br><span class="hljs-keyword">let</span> b = (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"showcount"</span>);<br>    Event.listen(<span class="hljs-string">'add'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">count</span>)</span>&#123;<br>        div.innerHTML = count;<br>    &#125;);<br>&#125;)();<br></code></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>å‚ç›´æ°´å¹³å±…ä¸­</title>
    <url>/2020/07/04/Center/</url>
    <content><![CDATA[<ol>
<li>ä½¿ç”¨ <code>flex</code></li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.wrapper</span> &#123;<br>    <span class="hljs-attribute">background</span>: red;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">justify-content</span>: center;<br>    <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><span class="hljs-selector-class">.wrapper</span> &gt; <span class="hljs-selector-class">.box</span> &#123;<br>    <span class="hljs-attribute">background</span>: blue;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ä½¿ç”¨ <code>position</code>ï¼Œ<code>margin: auto;</code></li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.wrapper</span> &#123;<br>    <span class="hljs-attribute">background</span>: red;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">position</span>: relative;<br>&#125;<br><span class="hljs-selector-class">.wrapper</span> &gt; <span class="hljs-selector-class">.box</span> &#123;<br>    <span class="hljs-attribute">background</span>: blue;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">position</span>: absolute;<br>    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">margin</span>: auto;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ä½¿ç”¨ <code>position</code>ï¼Œ<code>margin</code></li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.wrapper</span> &#123;<br>    <span class="hljs-attribute">background</span>: red;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">position</span>: relative;<br>&#125;<br><span class="hljs-selector-class">.wrapper</span> &gt; <span class="hljs-selector-class">.box</span> &#123;<br>    <span class="hljs-attribute">background</span>: blue;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">position</span>: absolute;<br>    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;<br>    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;<br>    <span class="hljs-comment">/*50px æ˜¯è‡ªå·±å®½å’Œé«˜çš„ä¸€åŠè·ç¦»*/</span><br>    <span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">50px</span>; <br>    <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">50px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>ä½¿ç”¨ <code>position</code>ï¼Œ<code>transform: translate()</code></li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.wrapper</span> &#123;<br>    <span class="hljs-attribute">background</span>: red;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<br>    <span class="hljs-attribute">position</span>: relative;<br>&#125;<br><span class="hljs-selector-class">.wrapper</span> &gt; <span class="hljs-selector-class">.box</span> &#123;<br>    <span class="hljs-attribute">background</span>: blue;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;<br>    <span class="hljs-attribute">position</span>: absolute;<br>    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;<br>    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;<br>    <span class="hljs-comment">/*translate ç›¸å¯¹è‡ªå·±å‘å·¦å‘ä¸Šç§»åŠ¨è‡ªå·±å®½é«˜çš„ 50% çš„è·ç¦»*/</span><br>    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>Event Loop</title>
    <url>/2020/05/20/EventLoop/</url>
    <content><![CDATA[<p>Event Loop æ˜¯ä¸ºäº† JS è¿›è¡Œå¼‚æ­¥æ“ä½œæ—¶é¿å…å‘ç”Ÿé˜»å¡è€Œè®¾è®¡çš„äº‹ä»¶æœºåˆ¶ã€‚</p>
<ul>
<li><p>JS æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œæ‰€ä»¥åŒä¸€æ—¶é—´åªèƒ½åšä¸€ä»¶äº‹</p>
</li>
<li><p>å¦‚æœè¿›è¡Œå¼‚æ­¥æ“ä½œï¼Œæ²¡æœ‰ Event loop æœºåˆ¶ç¨‹åºä¼šä¸€ç›´ç­‰ç€å®Œæˆå¼‚æ­¥æ“ä½œè€Œå‘ç”Ÿé˜»å¡</p>
</li>
<li><p>å¼‚æ­¥æ“ä½œï¼šPromiseã€setTimeoutã€setInterval</p>
</li>
<li><p>å¯ä»¥ä½¿ç”¨ H5 çš„ Web Worker è¿›è¡Œå¤šçº¿ç¨‹æ“ä½œï¼Œä½†æ˜¯æµè¡Œ</p>
</li>
</ul>
<p>æœºåˆ¶</p>
<ul>
<li><p>ç®€è¨€ä¹‹å°±æ˜¯ JS åªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹æ‰§è¡Œå®Œæ‰§è¡Œæ ˆçš„ä»»åŠ¡åå»æ£€æŸ¥å¼‚æ­¥çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœå¼‚æ­¥äº‹ä»¶è§¦å‘ï¼Œåˆ™å°†å…¶åŠ åˆ°ä¸»çº¿ç¨‹çš„æ‰§è¡Œæ ˆã€‚</p>
</li>
<li><p>å¼‚æ­¥æ“ä½œä¼šæ”¾å…¥å¼‚æ­¥çš„ä»»åŠ¡é˜Ÿåˆ—</p>
</li>
<li><p>å¼‚æ­¥æ“ä½œåˆè¢«åˆ†ä¸º <code>å®ä»»åŠ¡</code> å’Œ <code>å¾®ä»»åŠ¡</code> æ¥æ‰§è¡Œ</p>
</li>
</ul>
<p>ä»»åŠ¡é˜Ÿåˆ—</p>
<ul>
<li>å®ä»»åŠ¡ï¼š<code>setInterval</code>ã€<code>setTimeout</code></li>
<li>å¾®ä»»åŠ¡ï¼š<code>new Promise</code>ã€<code>MutaionObserver</code></li>
</ul>
<p>æ‰§è¡Œè§„åˆ™</p>
<ul>
<li><p>ä¸»çº¿ç¨‹åŒæ­¥æ“ä½œ =&gt; å¾®ä»»åŠ¡ =&gt; å®ä»»åŠ¡</p>
</li>
<li><p>ç¬¬ä¸€æ­¥æ‰§è¡Œä¸»çº¿ç¨‹çš„åŒæ­¥æ“ä½œï¼Œç¬¬äºŒæ­¥å¦‚æœæœ‰å¾®ä»»åŠ¡æ”¾å…¥ä¸»çº¿ç¨‹æ‰§è¡Œæ²¡æœ‰çš„è¯å»æŸ¥çœ‹å®ä»»åŠ¡ï¼Œæœ€åå½“ä¸»çº¿ç¨‹å’Œå¾®ä»»åŠ¡æ£€æŸ¥å’Œæ‰§è¡Œå®Œæ¯•åæŠŠå®ä»»åŠ¡æ”¾åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œ</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>aa</title>
    <url>/2020/07/08/aa/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>React ç»„ä»¶é€šä¿¡</title>
    <url>/2020/06/19/TX/</url>
    <content><![CDATA[<p>å››ç§æƒ…å†µï¼š</p>
<ol>
<li>çˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶</li>
<li>å­ç»„ä»¶åˆ°çˆ¶ç»„ä»¶</li>
<li>è·¨çº§ç»„ä»¶</li>
<li>éåµŒå¥—ç»„ä»¶</li>
</ol>
<h2 id="çˆ¶ä¼ å­"><a href="#çˆ¶ä¼ å­" class="headerlink" title="çˆ¶ä¼ å­"></a>çˆ¶ä¼ å­</h2><p>é€šè¿‡ props ä¼ é€’æ•°æ®</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> Parent = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br> <span class="hljs-keyword">return</span> (<br>     &lt;Child value=<span class="hljs-string">"å„¿å­æ‚¨å¥½ï¼"</span> /&gt;<br> )   <br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> Child = <span class="hljs-function">(<span class="hljs-params">&#123; value &#125;</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> (<br>        &lt;div&gt;&#123; value &#125;&lt;<span class="hljs-regexp">/div&gt;</span><br><span class="hljs-regexp">    )</span><br><span class="hljs-regexp">&#125;</span><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="å­ä¼ çˆ¶"><a href="#å­ä¼ çˆ¶" class="headerlink" title="å­ä¼ çˆ¶"></a>å­ä¼ çˆ¶</h2><p>ä½¿ç”¨å›è°ƒå‡½æ•°çš„å½¢å¼</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> Parent = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br> <span class="hljs-keyword">const</span> getChildValue = <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> &#123;<br>     <span class="hljs-built_in">console</span>.log(val) <span class="hljs-comment">// false</span><br> &#125;<br> <span class="hljs-keyword">return</span> (<br>     &lt;Child getChildValue = &#123; getChildValue &#125; /&gt;<br> )   <br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> Child = <span class="hljs-function">(<span class="hljs-params">&#123; getChildValue &#125;</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> [ val, setVal ] = useState(<span class="hljs-literal">false</span>)<br>    <span class="hljs-keyword">const</span> check = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>        getChildValue(val)<br>    &#125;<br>    <span class="hljs-keyword">return</span> (<br>        &lt;button onClick=&#123; check &#125;&gt;Check it!&lt;<span class="hljs-regexp">/button&gt;</span><br><span class="hljs-regexp">    )</span><br><span class="hljs-regexp">&#125;</span><br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨ ref</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> Parent = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br> <span class="hljs-keyword">const</span> getChildValue = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>     <span class="hljs-comment">// è·å¾—å­ç»„ä»¶ state çš„ msg å±æ€§å€¼</span><br>     <span class="hljs-keyword">this</span>.refs.getChildValue.state.msg<br> &#125;<br> <span class="hljs-keyword">return</span> (<br>     &lt;&gt;<br>     &lt;button onClick=&#123;getChildValue&#125;&gt;&lt;<span class="hljs-regexp">/button&gt;</span><br><span class="hljs-regexp">     &lt;Child ref="children" /</span>&gt;<br>     &lt;<span class="hljs-regexp">/&gt;</span><br><span class="hljs-regexp"> )   </span><br><span class="hljs-regexp">&#125;</span><br></code></pre></td></tr></table></figure>

<hr>
<h2 id="è·¨ç»„ä»¶ä¼ å€¼"><a href="#è·¨ç»„ä»¶ä¼ å€¼" class="headerlink" title="è·¨ç»„ä»¶ä¼ å€¼"></a>è·¨ç»„ä»¶ä¼ å€¼</h2><p>ä½¿ç”¨ context</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// Provider ç”Ÿäº§è€…ï¼ŒConsumer æ¶ˆè´¹è€…ï¼ŒdefaultValue é»˜è®¤å…±äº«æ•°æ®</span><br><span class="hljs-keyword">const</span> &#123; Provider, Consumer &#125; = React.createContext(defaultValue);<br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx">&lt;Provider value=&#123;<span class="hljs-string">'å…±äº«çš„æ•°æ®'</span>&#125;&gt;<br>    &lt;Son /&gt;<br>&lt;<span class="hljs-regexp">/Provider&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// æ¶ˆè´¹è€…éœ€è¦åµŒå¥—åœ¨ç”Ÿäº§è€…é‡Œé¢</span><br>&lt;Consumer&gt;<br>    &#123; value =&gt; value.split(<span class="hljs-string">''</span>) <span class="hljs-comment">/*[å…±ï¼Œäº«ï¼Œçš„ï¼Œæ•°ï¼Œæ®]*/</span> &#125;<br>    &lt;Grandson /&gt;<br>&lt;<span class="hljs-regexp">/Consumer&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx">&lt;Consumer&gt;<br>    &#123; value =&gt; &#123;<span class="hljs-comment">/*å…±äº«çš„æ•°æ®*/</span>&#125; &#125;<br>&lt;<span class="hljs-regexp">/Consumer&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœå­ç»„ä»¶æ¶ˆè´¹æˆ–è€…æ”¹å˜å€¼ï¼Œå­™å­ç»„ä»¶æ¥æ”¶åˆ°çš„å€¼æ˜¯å¦å‡†ç¡®</p>
</blockquote>
<hr>
<h2 id="æ²¡æœ‰åµŒå¥—å…³ç³»"><a href="#æ²¡æœ‰åµŒå¥—å…³ç³»" class="headerlink" title="æ²¡æœ‰åµŒå¥—å…³ç³»"></a>æ²¡æœ‰åµŒå¥—å…³ç³»</h2><p>å…„å¼Ÿç»„ä»¶ï¼šå¦‚æœæœ‰å…±åŒçš„çˆ¶ç»„ä»¶ï¼Œç¬¬ä¸€ä¸ªå­ç»„ä»¶å…ˆä¼ å€¼åˆ°çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶ä¿å­˜åæŠŠå€¼ä¼ åˆ°éœ€è¦æ•°æ®çš„ç¬¬äºŒä¸ªå­ç»„ä»¶</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> Parent = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> [Son1Val, setSon1Val] = useState(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">const</span> getSonVal = <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> &#123;<br>        setSon1Val(val)<br>    &#125;<br>    <span class="hljs-keyword">return</span> (<br>    &lt;&gt;<br>      &lt;Son1 getSonVal=&#123;getSonVal&#125; /&gt;<br>      &lt;Son2 Son1Val=&#123;Son1Val&#125;/&gt;    <br>    &lt;<span class="hljs-regexp">/&gt;</span><br><span class="hljs-regexp">    )</span><br><span class="hljs-regexp">&#125;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> Son1 = <span class="hljs-function">(<span class="hljs-params">&#123; getSonVal &#125;</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> pushVal = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>        getSonVal(<span class="hljs-number">666</span>)<br>    &#125;<br>    <span class="hljs-keyword">return</span> (<br>    &lt;&gt;<br>      &lt;button onClick=&#123;pushVal&#125;&gt;&lt;<span class="hljs-regexp">/button&gt; </span><br><span class="hljs-regexp">    &lt;/</span>&gt;<br>    )<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> Son2 = <span class="hljs-function">(<span class="hljs-params">&#123; Son1Val &#125;</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> (<br>    &lt;&gt;<br>      &#123; Son1Val &#125; &#123;<span class="hljs-comment">/*666*/</span>&#125; <br>    &lt;<span class="hljs-regexp">/&gt;</span><br><span class="hljs-regexp">    )</span><br><span class="hljs-regexp">&#125;</span><br></code></pre></td></tr></table></figure>

<hr>
<p>å‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼</p>
<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-comment">// ç®€æ˜“çš„è§‚å¯Ÿè€…æ¨¡å¼</span><br><span class="hljs-keyword">let</span> observer = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">const</span> listeners = [];<br>    <span class="hljs-comment">// æ·»åŠ äº‹ä»¶è®¢é˜…</span><br>    <span class="hljs-keyword">const</span> subscribe = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name, listener</span>) </span>&#123;<br>        <span class="hljs-keyword">if</span> (!listeners[name]) &#123;<br>            listeners[name] = [];<br>        &#125;<br>        listeners[name].push(listener);<br>        <span class="hljs-comment">// è¿”å›ç§»é™¤è®¢é˜…çš„æ–¹æ³•</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>            <span class="hljs-keyword">const</span> index = listeners[name].indexOf(listener);<br>            listeners[name].splice(index, <span class="hljs-number">1</span>);<br>        &#125;;<br>    &#125;;<br><br>    <span class="hljs-comment">// é€šçŸ¥äº‹ä»¶é˜Ÿåˆ—</span><br>    <span class="hljs-keyword">const</span> notify = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">name, ...args</span>) </span>&#123;<br>        (listeners[name] || []).map(<span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> &#123;<br>            listener.call(...args);<br>        &#125;);<br>    &#125;;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        subscribe,<br>        notify<br>    &#125;;<br>&#125;;<br><br><span class="hljs-comment">// ç›®æ ‡ç»„ä»¶</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChildA</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;<br>    <span class="hljs-keyword">constructor</span> (props) &#123;<br>        <span class="hljs-keyword">super</span>(props);<br>        <span class="hljs-keyword">this</span>.state = &#123;<br>            count: <span class="hljs-number">0</span><br>        &#125;;<br>    &#125;<br><br>    componentDidMount () &#123;<br>        <span class="hljs-comment">// æ·»åŠ è®¢é˜…ï¼Œåå­—ä¸ºlevelçš„è®¢é˜…</span><br>        <span class="hljs-keyword">this</span>.unsubscribe = cooStore.subscribe(<span class="hljs-string">'level'</span>, <span class="hljs-keyword">this</span>.setCount.bind(<span class="hljs-keyword">this</span>));<br>    &#125;<br><br>    componentWillUnmount () &#123;<br>        <span class="hljs-comment">// åˆ é™¤è®¢é˜…</span><br>        <span class="hljs-keyword">this</span>.unsubscribe();<br>    &#125;<br><br>    setCount () &#123;<br>        <span class="hljs-keyword">this</span>.setState(<span class="hljs-function">(<span class="hljs-params">prevState</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">return</span> &#123;<br>                count: prevState.count + <span class="hljs-number">1</span><br>            &#125;;<br>        &#125;);<br>    &#125;<br><br>    render () &#123;<br>        <span class="hljs-keyword">return</span> (<br>            &lt;div className=<span class="hljs-string">"level"</span>&gt;<br>                  æŒ‰é’®ç‚¹å‡»äº†ã€&#123;<span class="hljs-keyword">this</span>.state.count&#125;ã€‘æ¬¡<br>            &lt;<span class="hljs-regexp">/div&gt;</span><br><span class="hljs-regexp">        );</span><br><span class="hljs-regexp">    &#125;</span><br><span class="hljs-regexp">&#125;</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">/</span><span class="hljs-regexp">/ æºç»„ä»¶è§¦å‘é€šçŸ¥</span><br><span class="hljs-regexp">class ChildB extends Component &#123;</span><br><span class="hljs-regexp">    constructor (props) &#123;</span><br><span class="hljs-regexp">        super(props);</span><br><span class="hljs-regexp">        this.state = &#123;</span><br><span class="hljs-regexp">        &#125;;</span><br><span class="hljs-regexp">    &#125;</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">    notify () &#123;</span><br><span class="hljs-regexp">        /</span><span class="hljs-regexp">/ å‘é€é€šçŸ¥ï¼Œåå­—ä¸ºlevelçš„é€šçŸ¥</span><br><span class="hljs-regexp">        cooStore.notify('level');</span><br><span class="hljs-regexp">    &#125;</span><br><span class="hljs-regexp">    render () &#123;</span><br><span class="hljs-regexp">        return (</span><br><span class="hljs-regexp">            &lt;div className="level"&gt;</span><br><span class="hljs-regexp">                &lt;button onClick=&#123;this.notify.bind(this)&#125;&gt;é€šçŸ¥&lt;/</span>button&gt;<br>            &lt;<span class="hljs-regexp">/div&gt;</span><br><span class="hljs-regexp">        );</span><br><span class="hljs-regexp">    &#125;</span><br><span class="hljs-regexp">&#125;</span><br></code></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>è·¨åŸŸ</title>
    <url>/2020/07/05/cross-domain/</url>
    <content><![CDATA[<blockquote>
<p>è·¨åŸŸæ˜¯ä¸å¯èƒ½é å‰ç«¯å•æ–¹é¢è§£å†³çš„ï¼Œä¸ç®¡æ˜¯æ€ä¹ˆè§£å†³ï¼Œéƒ½éœ€è¦æœåŠ¡ç«¯çš„æ”¯æŒ</p>
</blockquote>
<h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><blockquote>
<p><strong>åŒæºç­–ç•¥</strong>é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”ã€ŠMDN web docsã€‹</p>
</blockquote>
<p>é‚£æŒ‰ç…§åŒæºç­–ç•¥ï¼Œä¸åŒæºçš„æ˜¯ä¸èƒ½è¿›è¡Œè¯·æ±‚ç­‰æ“ä½œçš„ï¼Œé‚£ä»€ä¹ˆæ ·çš„æ˜¯åŒæºï¼Œä»€ä¹ˆæ ·çš„åˆä¸æ˜¯åŒæºå‘¢ï¼ˆæˆ‘æƒ³ä»äº‹å‰ç«¯çš„å°ä¼™ä¼´å¤šå¤šå°‘å°‘åº”è¯¥éƒ½åº”è¯¥çŸ¥é“ï¼‰ï¼›<br>åªè¦æ»¡è¶³<strong>åè®®ã€ä¸»æœºã€ç«¯å£</strong>ä¸€è‡´ï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„æºã€‚</p>
<h2 id="è·¨åŸŸ"><a href="#è·¨åŸŸ" class="headerlink" title="è·¨åŸŸ"></a>è·¨åŸŸ</h2><h3 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h3><p>åŸç†ï¼šåˆ©ç”¨ <code>src</code> å’Œ <code>href</code> å±æ€§å¯ä»¥è¿›è¡Œè·¨åŸŸè¯·æ±‚çš„ç‰¹æ€§ï¼ŒåŠ¨æ€æ·»åŠ  <code>script</code> æ ‡ç­¾å’Œå›è°ƒå‡½æ•°å®ç°è·¨åŸŸï¼Œåªèƒ½ç”¨åœ¨ GET è¯·æ±‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!doctype <span class="hljs-meta-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>JSONP<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="actionscript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">print</span><span class="hljs-params">(data)</span> </span>&#123;</span><br><span class="javascript">      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`æˆ‘å«<span class="hljs-subst">$&#123;data&#125;</span>`</span>);</span><br><span class="javascript">      <span class="hljs-keyword">let</span> jsonpScript = <span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">'jsonpScript'</span>)[<span class="hljs-number">0</span>];</span><br><span class="javascript">      <span class="hljs-built_in">document</span>.body.removeChild(jsonpScript);</span><br>    &#125;<br><span class="actionscript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">jsonpRequest</span><span class="hljs-params">(callback)</span> </span>&#123;</span><br><span class="javascript">      <span class="hljs-keyword">let</span> jsonpScript = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);</span><br><span class="javascript">      jsonpScript.src = <span class="hljs-string">`http://www.hello.com/jsonp/js/index.js?callback=<span class="hljs-subst">$&#123;callback&#125;</span>`</span>;</span><br><span class="actionscript">      jsonpScript.className = <span class="hljs-string">'jsonpScript'</span>;</span><br><span class="javascript">      <span class="hljs-built_in">document</span>.body.appendChild(jsonpScript);</span><br>    &#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"jsonpRequest('print')"</span>&gt;</span>å‘ä¸ªJSONPè¯·æ±‚<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// jsonp/js/index.js</span><br>print(&#123;<br>    name: <span class="hljs-string">'jerry'</span>,<br>  &#125;)<br></code></pre></td></tr></table></figure>

<hr>
<h3 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h3><p>CORS æ–¹æ³•çš„å…¨ç§°æ˜¯ Cross-origin resource sharingï¼Œä¸­æ–‡åå«â€œè·¨åŸŸèµ„æºå…±äº«â€ã€‚</p>
<p><strong>ç®€å•è¯·æ±‚</strong></p>
<p>ç®€å•è¯·æ±‚çš„å‡ ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li>è¯·æ±‚æ–¹æ³•ä¸º HEADã€GET æˆ–è€… POST ä¸­çš„ä¸€ç§</li>
<li>HTTPçš„å¤´ä¿¡æ¯ä¸è¶…è¿‡ä»¥ä¸‹å‡ ç§å­—æ®µ<code>Accept</code>ã€<code>Accept-Language</code>ã€<code>Content-Language</code>ã€<code>Last-Event-ID</code></li>
<li><code>Content-Type</code>çš„å€¼åªé™äº<code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>text/plain</code>ä¸‰ä¸ª  </li>
</ol>
<p>ä»æµè§ˆå™¨å‘å‡ºè¯·æ±‚çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µ <code>Originï¼šæºåœ°å€</code> ï¼ŒæœåŠ¡ç«¯æ ¹æ®è¿™ä¸ªå€¼ï¼Œå†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ï¼Œå¦‚æœ<code>Origin</code>çš„å€¼ä¸åœ¨æŒ‡å®šçš„è®¸å¯èŒƒå›´ï¼ŒæœåŠ¡ç«¯è¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ã€‚æµè§ˆå™¨å‘ç°ï¼Œè¿™ä¸ªå›åº”çš„å¤´ä¿¡æ¯æ²¡æœ‰åŒ…å«Access-Control-Allow-Originå­—æ®µï¼Œå°±çŸ¥é“å‡ºé”™äº†ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestçš„onerrorå›è°ƒå‡½æ•°æ•è·ã€‚æ³¨æ„ï¼Œè¿™ç§é”™è¯¯æ— æ³•é€šè¿‡çŠ¶æ€ç è¯†åˆ«ï¼Œå› ä¸ºHTTPå›åº”çš„çŠ¶æ€ç æœ‰å¯èƒ½æ˜¯200ã€‚ å¦‚æœAccess-Control-Allow-Originå­—æ®µæ­£å¥½è·Ÿå¸¦è¿‡å»çš„<code>Origin</code>çš„å€¼ä¸€æ ·ï¼Œåˆ™è¿”å›å¯¹åº”çš„æ•°æ®ï¼Œå®Œæˆä¸€æ¬¡è¯·æ±‚ã€‚ã€‚</p>
<p><strong>éç®€å•è¯·æ±‚ä»¥åŠ<code>option</code>è¯·æ±‚</strong></p>
<p>éç®€å•è¯·æ±‚æ˜¯é‚£ç§å¯¹æœåŠ¡å™¨æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯<code>PUT</code>æˆ–<code>DELETE</code>ï¼Œæˆ–è€…<code>Content-Type</code>å­—æ®µçš„ç±»å‹æ˜¯<code>application/json</code>ã€‚åœ¨è¿›è¡Œéç®€å•è¯·æ±‚ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šåœ¨æ­£å¼è¯·æ±‚ä¹‹å‰å‘é€ä¸€æ¬¡é¢„æ£€è¯·æ±‚ï¼Œè¿™å°±æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°çš„<code>option</code>è¯·æ±‚ï¼Œå°±æ˜¯è¯´ï¼Œæ­£å¼è¯·æ±‚ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šå»é—®æœåŠ¡ç«¯æˆ‘è¿™ä¸ªåœ°å€èƒ½ä¸èƒ½è®¿é—®ä½ ï¼Œå¦‚æœå¯ä»¥ï¼Œæµè§ˆå™¨æ‰ä¼šå‘é€æ­£å¼çš„è¯·æ±‚ï¼Œå¦åˆ™æŠ¥é”™ã€‚</p>
<p><strong>æ€»ç»“</strong></p>
<p>æ€»çš„æ¥è¯´ï¼ŒCORSå®ç°è·¨åŸŸçš„æ–¹æ³•å°±æ˜¯æ ¹æ®è¯·æ±‚å¤´çš„<code>Origin</code>å€¼å’Œå“åº”å¤´çš„<code>Access-Control-Request-Headers</code>å’Œ<code>Access-Control-Request-Method</code>çš„å€¼è¿›è¡Œæ¯”å¯¹ï¼Œé€šè¿‡äº†å°±å¯ä»¥è¯·æ±‚æˆåŠŸï¼Œæ²¡é€šè¿‡å°±è¯·æ±‚å¤±è´¥ã€‚</p>
<hr>
<h3 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h3><p>åŸç†ï¼šåŒæºç­–ç•¥åªé€‚ç”¨äºå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚ï¼Œè€Œä»£ç†æ¨¡å¼æ˜¯æœåŠ¡ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚</p>
<p><strong>node åå‘ä»£ç†</strong></p>
<p>å¦‚æœæˆ‘ä»¬ç”¨çš„æ˜¯nodeèµ·çš„å‰ç«¯æœåŠ¡ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨nodeæ¥ç›´æ¥è¿›è¡Œåå‘ä»£ç†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> &#123; createProxyMiddleware &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http-proxy-middleware'</span>);<span class="hljs-comment">//1.0.0ç‰ˆæœ¬å‰éƒ½æ˜¯ç”¨proxy,1.0.0åä½¿ç”¨porxyä¼šæŠ¥é”™,åº”ä½¿ç”¨createProxyMiddleware;</span><br><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">app</span>) </span>&#123;<br>  app.use(<br>    createProxyMiddleware(<br>      <span class="hljs-string">'/api'</span>,<br>      &#123;<br>        target: <span class="hljs-string">'http://v.juhe.cn'</span>,<br>        pathRewrite: &#123; <span class="hljs-string">'^/api'</span>: <span class="hljs-string">''</span> &#125;,<br>        changeOrigin: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// targetæ˜¯åŸŸåçš„è¯ï¼Œéœ€è¦è¿™ä¸ªå‚æ•°ï¼Œ</span><br>        secure: <span class="hljs-literal">false</span>,<br>      &#125;<br>    )<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>nginx åå‘ä»£ç†</strong></p>
<p>â€¦</p>
<p><strong>æ­£å‘ä»£ç† / åå‘ä»£ç†</strong></p>
<p>æ­£å‘ä»£ç†ï¼Œæ¸…æ¥šçš„çŸ¥é“æ˜¯é‚£ä¸ªæœåŠ¡å™¨è¿”å›çš„æ•°æ®</p>
<p>åå‘ä»£ç†ï¼Œä¸æ¸…æ¥šæ˜¯é‚£ä¸ªæœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œå› ä¸ºæ•°æ®æ˜¯ä»å¤šä¸ªæœåŠ¡å™¨è·å–çš„</p>
]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>JS æ¯”è¾ƒå¯¹è±¡æ˜¯å¦ç›¸ç­‰</title>
    <url>/2020/05/24/deepEqualFunc/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> deepEqual = <span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">if</span> (x === y) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>  &#125;<br>  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> x === <span class="hljs-string">"object"</span> &amp;&amp; x != <span class="hljs-literal">null</span>) &amp;&amp; (<span class="hljs-keyword">typeof</span> y === <span class="hljs-string">"object"</span> &amp;&amp; y != <span class="hljs-literal">null</span>)) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Object</span>.keys(x).length != <span class="hljs-built_in">Object</span>.keys(y).length) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> prop <span class="hljs-keyword">in</span> x) &#123;<br>      <span class="hljs-keyword">if</span> (y.hasOwnProperty(prop)) &#123;<br>        <span class="hljs-keyword">if</span> (!deepEqual(x[prop], y[prop])) &#123;<br>          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>        &#125;<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>git åŸºæœ¬æŒ‡ä»¤</title>
    <url>/2020/05/04/git%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<p><strong>æäº¤æ–‡ä»¶</strong></p>
<p>åˆå§‹åŒ– Git <code>git init</code> </p>
<p>æŠŠä¿®æ”¹å’Œæ–°å¢çš„æ–‡ä»¶æäº¤åˆ°æš‚å­˜åŒº <code>git add .</code></p>
<p>æäº¤æš‚å­˜åŒºçš„æ–‡ä»¶åˆ°ä»“åº“ <code>git commit -m &quot;å¯¹æäº¤çš„æè¿°&quot;</code></p>
<p>æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ <code>git status</code>ï¼š</p>
<ul>
<li>çº¢è‰²ï¼šæ–°å»ºæ–‡ä»¶ã€æ–‡ä»¶å†…å®¹è¢«æ”¹åŠ¨ã€æ–‡ä»¶è¢«åˆ é™¤</li>
<li>ç»¿è‰²ï¼šåœ¨æš‚å­˜åŒºç­‰å¾…è¢« commit</li>
<li>working tree cleanï¼šå·²ç» commit æˆ–è€…æ–‡æ¡£æ²¡æœ‰è¢«æ”¹åŠ¨</li>
</ul>
<hr>
<p><strong>ç‰ˆæœ¬å›é€€</strong></p>
<p>æŸ¥çœ‹æäº¤å†å² <code>git log</code></p>
<p>æŸ¥çœ‹å‘½ä»¤å†å² <code>git reflog</code></p>
<p>å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼ˆå°±æ˜¯ä¸Šä¸€æ¬¡ commit å‰çš„çŠ¶æ€ï¼‰<code>git reset --hard HEAD^</code></p>
<blockquote>
<p>^ è¡¨ç¤ºä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œ^^ è¡¨ç¤ºä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬ä¾æ¬¡ç±»æ¨</p>
</blockquote>
<p>å›é€€åˆ°ä¸Šä¸€ä¸ªæŒ‡å®šçš„ç‰ˆæœ¬ <code>git reset --hard commit_id</code></p>
<blockquote>
<p>commit_idï¼šä½¿ç”¨ git log æŸ¥çœ‹</p>
</blockquote>
<hr>
<p><strong>è¿œç¨‹ä»“åº“</strong></p>
<blockquote>
<p>ä»¥ Github ä¸ºä¾‹ï¼Œé…ç½® Github <a href="https://www.liaoxuefeng.com/wiki/896043488029600/896954117292416" target="_blank" rel="noopener">å»–é›ªå³° Git æ•™ç¨‹</a></p>
</blockquote>
<p>é…ç½®å¯†é’¥åˆ›å»ºè¿œç¨‹ä»“åº“åï¼Œå…³è”è¿œç¨‹ä»“åº“ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ git remote add origin git@ä½ çš„ github åœ°å€/ä»“åº“å.git<br></code></pre></td></tr></table></figure>

<p>æ¨é€åˆ°è¿œç¨‹ä»“åº“</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ git push -u origin master<br></code></pre></td></tr></table></figure>

<blockquote>
<p>ä»¥åæƒ³è¦æ¨é€åˆ°è¿œç¨‹ä»“åº“åªè¦ <code>git commit -m &quot;msg&quot;</code> å <code>git push</code> å°±å¯ä»¥</p>
</blockquote>
<p>å…‹éš†ä»“åº“æ–‡ä»¶åˆ°æœ¬åœ°</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">clone</span> git@github.com:xxx/xxx.git<br></code></pre></td></tr></table></figure>

<hr>
<p><strong>åˆ†æ”¯æ“ä½œ</strong></p>
<blockquote>
<p>master æ˜¯ä¸»åˆ†æ”¯ï¼Œå…¬å¸ä¸€èˆ¬ç”¨äºä¸Šçº¿é¡¹ç›®ã€‚è€Œå¹³å¸¸æäº¤ä»£ç ä¸€èˆ¬ä¼šåœ¨å¦å¤–æ–°å»ºåˆ†æ”¯è¿›è¡Œæäº¤</p>
</blockquote>
<p>æŸ¥çœ‹åˆ†æ”¯ï¼š<code>git branch</code></p>
<p>åˆ›å»ºåˆ†æ”¯ï¼š<code>git branch &lt;name&gt;</code></p>
<p>åˆ‡æ¢åˆ†æ”¯ï¼š<code>git checkout &lt;name&gt;</code>æˆ–è€…<code>git switch &lt;name&gt;</code></p>
<p>åˆ›å»º+åˆ‡æ¢åˆ†æ”¯ï¼š<code>git checkout -b &lt;name&gt;</code>æˆ–è€…<code>git switch -c &lt;name&gt;</code></p>
<p>åˆå¹¶æŸåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ï¼š<code>git merge &lt;name&gt;</code></p>
<p>åˆ é™¤åˆ†æ”¯ï¼š<code>git branch -d &lt;name&gt;</code></p>
<hr>
<p><strong>æ ‡ç­¾ç®¡ç†</strong></p>
<p>å‘½ä»¤<code>git tag &lt;tagname&gt;</code> ç”¨äºæ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œé»˜è®¤ä¸º<code>HEAD</code>ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit idï¼›</p>
<p>å‘½ä»¤<code>git tag -a &lt;tagname&gt; -m &quot;blablabla...&quot;</code>å¯ä»¥æŒ‡å®šæ ‡ç­¾ä¿¡æ¯ï¼›</p>
<p>å‘½ä»¤<code>git tag</code>å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ã€‚</p>
<p>æ“ä½œæ ‡ç­¾ï¼š</p>
<ul>
<li>å‘½ä»¤<code>git push origin</code>å¯ä»¥æ¨é€ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼›</li>
<li>å‘½ä»¤<code>git push origin --tags</code>å¯ä»¥æ¨é€å…¨éƒ¨æœªæ¨é€è¿‡çš„æœ¬åœ°æ ‡ç­¾ï¼›</li>
<li>å‘½ä»¤<code>git tag -d &lt;tagname&gt;</code>å¯ä»¥åˆ é™¤ä¸€ä¸ªæœ¬åœ°æ ‡ç­¾ï¼›</li>
<li>å‘½ä»¤<code>git push origin :refs/tags/&lt;tagname&gt;</code>å¯ä»¥åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ã€‚</li>
</ul>
<hr>
<blockquote>
<p>è¯¦ç»†å†…å®¹ <a href="https://www.liaoxuefeng.com/wiki/896043488029600" target="_blank" rel="noopener">å»–é›ªå³° Git æ•™ç¨‹</a></p>
</blockquote>
]]></content>
      <tags>
        <tag>è½¯ä»¶å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo åˆ›å»ºåšå®¢è¸©çš„å‘</title>
    <url>/2020/05/03/hexo%E5%88%9B%E5%BB%BA%E5%8D%9A%E5%AE%A2%E8%B8%A9%E7%9A%84%E5%9D%91/</url>
    <content><![CDATA[<p>â€‹        ç¬¬ä¸€æ¬¡å†™åšå®¢é‚£å°±åæ§½ä¸€ä¸‹ç”¨ hexo åˆ›å»ºåšå®¢è¸©çš„å‘å§</p>
<p>â€‹        è¿™å°¼ç›å¦‚æœåœ¨ source/_posts ç›®å½•ä¸‹æ²¡æœ‰ .md æ–‡ä»¶æ˜¯ä¸èƒ½ <code>hexo g</code> åˆ›å»º .html é™æ€æ–‡ä»¶çš„ï¼ŒåºŸäº†è€åŠå¤©åŠ²æ‰</p>
<p>å‘ç°ã€‚æ°”æ­»æˆ‘äº†å¸Œæœ›å¤§å®¶åˆ«è¸©æˆ‘è¿™å‘äº†ï¼ï¼ˆè‡ªåŠ¨åˆ›å»ºåæœ‰ä¸€ä¸ª hello_world.md æ–‡ä»¶çš„ï¼Œä½†æˆ‘è¿™äººå¼ºè¿«ç—‡å‘ä½œæŠŠå®ƒ</p>
<p>åˆ äº†ğŸ˜€ï¼‰</p>
]]></content>
      <tags>
        <tag>åæ§½</tag>
      </tags>
  </entry>
  <entry>
    <title>å®ç°ä¸€ä¸ªç®€å•çš„ Redux</title>
    <url>/2020/06/25/redux%20%E7%AE%80%E5%8D%95%E7%9A%84%E5%AE%9E%E7%8E%B0/</url>
    <content><![CDATA[<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> createStore = <span class="hljs-function">(<span class="hljs-params">reducer</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">let</span> state, <span class="hljs-comment">// Where we store the state of whole application  </span><br>      listeners = [] <span class="hljs-comment">// Store all subscribed callback function</span><br><br>  <span class="hljs-keyword">const</span> getState = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> state<br><br>  <span class="hljs-keyword">const</span> disptach = <span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> &#123;<br>      state = reducer(state, action)<br>      listeners.forEach(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> l())<br>  &#125;<br><br>  <span class="hljs-keyword">const</span> subscribe = <span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> &#123;<br>    listeners.push(listener)<br>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>      listeners = listeners.filter(<span class="hljs-function"><span class="hljs-params">l</span> =&gt;</span> l !== listener)<br>    &#125;<br>  &#125;<br><br>  dispatch(&#123;&#125;) <span class="hljs-comment">// Just to get the reducer to return the initial value.  </span><br>  <span class="hljs-keyword">return</span> &#123; getState, dispatch, subscribe &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>redux, react-redux</title>
    <url>/2020/05/07/redux/</url>
    <content><![CDATA[<h2 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h2><ul>
<li><p>å…¨å±€çŠ¶æ€ç®¡ç†æ¨¡å—</p>
</li>
<li><p>ç®¡ç†ç»„ä»¶ä¹‹é—´ä¼ é€’çš„æ•°æ®</p>
</li>
</ul>
<p><strong>ä¸‰ä¸ªé‡è¦éƒ¨åˆ†</strong></p>
<ul>
<li><p><code>action</code></p>
</li>
<li><p><code>reducer</code>ï¼šè¿›è¡ŒçŠ¶æ€ä¿®æ”¹</p>
</li>
<li><p><code>state(store)</code>ï¼šå­˜å‚¨æ•°æ®çš„åœ°æ–¹</p>
</li>
</ul>
<blockquote>
<p>dispatch æ˜¯æ´¾å‘çš„äº‹ä»¶</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">import &#123; createStore &#125; from &#39;redux&#39;<br><br>&#x2F;&#x2F; reducer<br>const counterReducer &#x3D; (state &#x3D; &#123; count: 1 &#125;, action) &#x3D;&gt; &#123;<br>  return state<br>&#125;;<br><br>&#x2F;&#x2F; store<br>const store &#x3D; createStore(counterReducer);<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; å¦‚æœéœ€è¦æ”¹å˜ä¸€ä¸ª reducer çš„å€¼ï¼Œéœ€è¦ä½¿ç”¨ dispatch æ´¾å‘ä¸€ä¸ª action<br>&#x2F;&#x2F; action éœ€è¦ä¸¤ä¸ªå‚æ•°<br>&#x2F;&#x2F; 1. type    éœ€è¦ä½¿ç”¨ type åŒºåˆ†å¯¹ state åšä»€ä¹ˆæ“ä½œ<br>&#x2F;&#x2F; 2. payload ä¼ é€’çš„æ•°æ®<br><br>const counterReducer &#x3D; (state &#x3D; &#123; count: 1 &#125;, action) &#x3D;&gt; &#123;<br>  switch (action.type) &#123;<br>    case &#39;COUNT_ADD&#39;:<br>      return &#123;<br>        ...state, count: state.count + 1<br>      &#125;;<br>    case &#39;COUNT_REDUCE&#39;:<br>      return &#123;<br>        ...state, count: state.count - 1<br>      &#125;;<br>    default:<br>      return state;<br>  &#125;;<br>&#125;;<br><br>const store &#x3D; createStore(counterReducer);<br><br>store.dispatch(&#123;<br>  type: &#39;COUNT_ADD&#39;,<br>  payload: &#123;&#125;<br>&#125;);<br><br>store.dispatch(&#123;<br>  type: &#39;COUNT_REDUCE&#39;,<br>  payload: &#123;&#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>ä½¿ç”¨ chrome æ’ä»¶æŸ¥çœ‹çŠ¶æ€</strong></p>
<ul>
<li>Redux DevTools</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">const store &#x3D; createStore( <br>    counterReducer<br>    window.__REDUX_DEVTOOLS_EXTENSION_ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()<br>);<br></code></pre></td></tr></table></figure>

<hr>
<p><strong>ä½¿ç”¨å¤šä¸ª reducer</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F;ä½¿ç”¨ combineReducers<br>import &#123; createStore, combineReducers &#125; from &#39;redux&#39;<br><br>const counterReducer &#x3D; (state &#x3D; &#123; count: 1 &#125;, action) &#x3D;&gt; &#123;<br>  switch (action.type) &#123;<br>    case &#39;COUNT_ADD&#39;:<br>      return &#123;<br>        ...state, count: state.count + 1<br>      &#125;;<br>    case &#39;COUNT_REDUCE&#39;:<br>      return &#123;<br>        ...state, count: state.count - 1<br>      &#125;;<br>    default:<br>      return state;<br>  &#125;;<br>&#125;;<br><br>const postReducer &#x3D; (state &#x3D; &#123; list: [&#123; title: &#39;ä½ å¥½ï¼&#39; &#125;] &#125;, action) &#x3D;&gt; &#123;<br>  switch (action.type) &#123;<br>    case &#39;LOAD_POST&#39;:<br>      return &#123;<br>        ...state, list: action.payload<br>      &#125;;<br>    default:<br>      return state<br>  &#125;;<br>&#125;;<br><br>&#x2F;&#x2F;é€šè¿‡ combineReducers æŠŠå¤šä¸ª reducer è¿›è¡Œåˆå¹¶<br>const rootReducers &#x3D; combineReducers(&#123;<br>  counter: counterReducer,<br>  post: postReducer<br>&#125;);<br><br>const store &#x3D; createStore( <br>    rootReducers,<br>    window.__REDUX_DEVTOOLS_EXTENSION_ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()<br>);<br></code></pre></td></tr></table></figure>

<hr>
<p><strong>redux çš„ç½‘ç»œè¯·æ±‚</strong></p>
<blockquote>
<p>json holderï¼šç½‘ç«™ï¼Œä¼šæä¾›åœ¨çº¿çš„ API</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> redux ä½¿ç”¨ redux-thunk æ’ä»¶è¿›è¡Œç½‘ç»œè¯·æ±‚</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add redux-thunk </span><br><span class="hljs-meta">$</span><span class="bash"> yarn add axios</span><br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; å¯¼å…¥éœ€è¦çš„æ’ä»¶<br>import &#123; createStore, combineReducers, compose, applyMiddleware &#125; from &#39;redux&#39;<br>import &#123; get &#125; from &#39;axios&#39;<br>import thunk from &#39;redux-thunk&#39;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; é…ç½® store<br>const store &#x3D; createStore(<br>    rootReducers,<br>    compose(<br>        applyMiddleware(...[thunk])  &#x2F;&#x2F;éœ€è¦ä½¿ç”¨çš„ä¸­é—´ä»¶æ•°ç»„<br>    ),<br>    window.__REDUX_DEVTOOLS_EXTENSION_ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()<br>);<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">const getPostsRequest &#x3D; () &#x3D;&gt; &#123;<br>    return get(&#39;https:&#x2F;&#x2F;xxx.com&#x2F;posts&#39;);<br>&#125;;<br><br>store.dispatch(async (dispatch) &#x3D;&gt; &#123;<br>    const res &#x3D; await getPostsRequest();<br>    dispatch(&#123;<br>        type: &#39;LOAD_POST&#39;,<br>        payload: res.data<br>    &#125;);<br>&#125;);<br></code></pre></td></tr></table></figure>

<hr>
<p><strong>æ‹†åˆ†ä»£ç ï¼Œä½¿å…¶é˜…è¯»æ›´åˆç†</strong></p>
<ul>
<li>åœ¨ src æ–‡ä»¶å¤¹ä¸‹åˆ›å»º actions æ–‡ä»¶å¤¹ï¼ŒæŠŠæ‰€æœ‰çš„ action æ–‡ä»¶æ”¾åœ¨é‡Œé¢</li>
<li>åœ¨ src æ–‡ä»¶å¤¹ä¸‹åˆ›å»º reducers æ–‡ä»¶å¤¹ï¼ŒæŠŠæ‰€æœ‰çš„ reducer æ–‡ä»¶æ”¾åœ¨é‡Œé¢</li>
<li>åœ¨ src æ–‡ä»¶å¤¹ä¸‹åˆ›å»º services æ–‡ä»¶å¤¹ï¼ŒæŠŠæ‰€æœ‰çš„å…³äºç½‘ç»œè¯·æ±‚å¾—æ–‡ä»¶æ”¾åœ¨é‡Œé¢</li>
<li>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º store.js æ–‡ä»¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; src&#x2F;services&#x2F;post_api.js<br>import &#123; get &#125; from &#39;axios&#39;<br><br>export function getPosts() &#123;<br>    return get(&#39;https:&#x2F;&#x2F;xxx.com&#x2F;posts&#39;);<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; src&#x2F;actions&#x2F;counter_action.js<br>export const countAddAction &#x3D; &#123;<br>    type: &#39;COUNT_ADD&#39;<br>&#125;<br><br>export const countReduceAction &#x3D; &#123;<br>    type: &#39;COUNT_REDUCE&#39;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; src&#x2F;actions&#x2F;post_action.js<br>import &#123; getPosts &#125; from &#39;..&#x2F;services&#x2F;post_api&#39;<br><br>export const loadPostsAction &#x3D; async (dispatch) &#x3D;&gt; &#123;<br>    const res &#x3D; await getPosts();<br>    dispatch(&#123;<br>        type: &#39;LOAD_POSTS&#39;,<br>        payload: res.data<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; src&#x2F;reducers&#x2F;post_reducer.js<br>const postReducer &#x3D; (state &#x3D; &#123; list: [&#123; id: 1, title: &#39;ä½ å¥½ï¼&#39; &#125;] &#125;, action) &#x3D;&gt; &#123;<br>    switch (action.type) &#123;<br>        case &#39;LOAD_POST&#39;:<br>            return &#123;<br>                ...state, list: action.payload<br>            &#125;;<br>        default:<br>            return state<br>    &#125;;<br>&#125;;<br><br>export default postReducer;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; src&#x2F;reducers&#x2F;counter_reducer.js<br>const counterReducer &#x3D; (state &#x3D; &#123; count: 1 &#125;, action) &#x3D;&gt; &#123;<br>    switch (action.type) &#123;<br>        case &#39;COUNT_ADD&#39;:<br>            return &#123;<br>                ...state, count: state.count + 1<br>            &#125;;<br>        case &#39;COUNT_REDUCE&#39;:<br>            return &#123;<br>                ...state, count: state.count - 1<br>            &#125;;<br>        default:<br>            return state;<br>    &#125;;<br>&#125;;<br><br>export default counterReducer;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; src&#x2F;reducers&#x2F;index.js<br>&#x2F;&#x2F;åˆå¹¶ reducer<br>import &#123; combineReducers &#125; from &#39;redux&#39;<br><br>import counterReducer from &#39;.&#x2F;counter_reducer&#39;<br>import postReducer from &#39;.&#x2F;post_reducer&#39;<br><br>const rootReducers &#x3D; combineReducers(&#123;<br>    counter: counterReducer,<br>    post: postReducer<br>&#125;);<br><br>export default rootReducers;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F; src&#x2F;store.js<br>&#x2F;&#x2F;åˆå¹¶ store<br><br>import &#123; createStore, compose, applyMiddleware &#125; from &#39;redux&#39;<br>import thunk from &#39;redux-thunk&#39;<br><br>import rootReducers from &#39;.&#x2F;reducers&#x2F;index&#39;<br><br>const store &#x3D; createStore(<br>    rootReducers,<br>    compose(<br>        applyMiddleware(...[thunk])<br>    ),<br>    window.__REDUX_DEVTOOLS_EXTENSION_ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()<br>);<br><br>export default store;<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F;å¼•ç”¨ store<br>import store from &#39;.&#x2F;store&#39;<br><br>&#x2F;&#x2F;æ“ä½œ<br>import &#123; countAddAction &#125; from &#39;.&#x2F;actions&#x2F;counter_action&#39;<br>import &#123; loadPostsAction &#125; from &#39;.&#x2F;actions&#x2F;post_action&#39;<br><br>store.dispatch(countAddAction);<br>store.dispatch(loadPostsAction);<br></code></pre></td></tr></table></figure>

<hr>
<h2 id="åœ¨-react-ä½¿ç”¨-redux"><a href="#åœ¨-react-ä½¿ç”¨-redux" class="headerlink" title="åœ¨ react ä½¿ç”¨ redux"></a>åœ¨ react ä½¿ç”¨ redux</h2><figure class="highlight shell"><table><tr><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash"> éœ€è¦å®‰è£…æ’ä»¶</span><br><span class="hljs-meta">$</span><span class="bash"> yarn add react-redux</span><br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">import React from &#39;react&#39;<br>import ReactDOM from &#39;react-dom&#39;<br>import &#123; Provider &#125; from &#39;react-redux&#39;<br><br>import App from &#39;.&#x2F;App&#39;<br><br>import store from &#39;.&#x2F;store&#39;<br><br>&#x2F;&#x2F; ä½¿ç”¨ react-redux çš„ Provider å…ƒç´ æŠŠ &lt;App &#x2F;&gt; åŒ…è£¹èµ·æ¥ï¼Œè¿™æ ·æ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ store é‡Œé¢çš„æ•°æ®<br>ReactDOM.render(&lt;Provider store&#x3D;&#123;store&#125;&gt;<br>    &lt;App &#x2F;&gt;<br>&lt;&#x2F;Provider&gt;, document.getElementById(&#39;root&#39;));<br></code></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs react">&#x2F;&#x2F;ä½¿ç”¨ connect ç»„ä»¶æ ¹ redux è¿æ¥<br>import React, &#123; Component &#125; from &#39;react&#39;<br>import &#123; connect &#125; from &#39;react-redux&#39;<br>import &#123; loadPostsAction &#125; from &#39;..&#x2F;actions&#x2F;post_action&#39;<br><br>class PostList extends Component &#123;<br>    constructor(props) &#123;<br>        super(props);<br>        console.log(this.props);<br>    &#125;;<br>    componentDidMount() &#123;<br>        this.props.dispatch(loadPostsAction); &#x2F;&#x2F;åŠ è½½è¿œç¨‹æ•°æ®<br>    &#125;;<br>    render() &#123;<br>        const &#123; list &#125; &#x3D; this.props.post;<br>        const Posts &#x3D; list.map(post&#x3D;&gt;&#123;<br>            return (&lt;li key&#x3D;&#123;post.id&#125;&gt;&#123;post.title&#125;&lt;&#x2F;li&gt;)<br>        &#125;)<br>        return (<br>            &lt; div &gt;<br>                &lt;ul&gt;&#123; Posts &#125;&lt;&#x2F;ul&gt;<br>            &lt;&#x2F;div &gt;<br>        );<br>    &#125;;<br>&#125;;<br><br>const mapStateToProps &#x3D; (state, ownProps) &#x3D;&gt; &#123;<br>    return &#123;<br>        post: state.post<br>    &#125;;<br>&#125;;<br><br>&#x2F;&#x2F; é€šè¿‡ connect è¿æ¥ç»„ä»¶å’Œ redux æ•°æ®ï¼Œä¼ é€’ state æ•°æ®å’Œ dispatch æ–¹æ³•<br>export default connect(mapStateToProps)(PostList);<br></code></pre></td></tr></table></figure>

<hr>
]]></content>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜²æŠ–ï¼ŒèŠ‚æµ</title>
    <url>/2020/06/21/throttle-debounce/</url>
    <content><![CDATA[<h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><h3 id="å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰"><a href="#å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰" class="headerlink" title="å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰"></a>å‡½æ•°é˜²æŠ–ï¼ˆdebounceï¼‰</h3><p>å½“ä¸€ä¸ªåŠ¨ä½œè¿ç»­è§¦å‘ï¼Œåˆ™åªæ‰§è¡Œæœ€åä¸€æ¬¡</p>
<h3 id="å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰"><a href="#å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰" class="headerlink" title="å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰"></a>å‡½æ•°èŠ‚æµï¼ˆthrottleï¼‰</h3><p>ä¸€ä¸ªåŠ¨ä½œåœ¨ä¸€æ®µæ—¶é—´å†…åªèƒ½æ‰§è¡Œä¸€æ¬¡</p>
<h2 id="å¸¸è§åº”ç”¨åœºæ™¯"><a href="#å¸¸è§åº”ç”¨åœºæ™¯" class="headerlink" title="å¸¸è§åº”ç”¨åœºæ™¯"></a>å¸¸è§åº”ç”¨åœºæ™¯</h2><h3 id="å‡½æ•°é˜²æŠ–çš„åº”ç”¨åœºæ™¯"><a href="#å‡½æ•°é˜²æŠ–çš„åº”ç”¨åœºæ™¯" class="headerlink" title="å‡½æ•°é˜²æŠ–çš„åº”ç”¨åœºæ™¯"></a>å‡½æ•°é˜²æŠ–çš„åº”ç”¨åœºæ™¯</h3><p>è¿ç»­çš„äº‹ä»¶ï¼Œåªéœ€è§¦å‘ä¸€æ¬¡å›è°ƒçš„åœºæ™¯æœ‰ï¼š</p>
<ul>
<li>æœç´¢æ¡†æœç´¢è¾“å…¥ã€‚åªéœ€ç”¨æˆ·æœ€åä¸€æ¬¡è¾“å…¥å®Œï¼Œå†å‘é€è¯·æ±‚</li>
<li>æ‰‹æœºå·ã€é‚®ç®±éªŒè¯è¾“å…¥æ£€æµ‹</li>
<li>çª—å£å¤§å°Resizeã€‚åªéœ€çª—å£è°ƒæ•´å®Œæˆåï¼Œè®¡ç®—çª—å£å¤§å°ã€‚é˜²æ­¢é‡å¤æ¸²æŸ“ã€‚</li>
</ul>
<h3 id="å‡½æ•°èŠ‚æµçš„åº”ç”¨åœºæ™¯"><a href="#å‡½æ•°èŠ‚æµçš„åº”ç”¨åœºæ™¯" class="headerlink" title="å‡½æ•°èŠ‚æµçš„åº”ç”¨åœºæ™¯"></a>å‡½æ•°èŠ‚æµçš„åº”ç”¨åœºæ™¯</h3><p>é—´éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œä¸€æ¬¡å›è°ƒçš„åœºæ™¯æœ‰ï¼š</p>
<ul>
<li>æ»šåŠ¨åŠ è½½ï¼ŒåŠ è½½æ›´å¤šæˆ–æ»šåˆ°åº•éƒ¨ç›‘å¬</li>
<li>è°·æ­Œæœç´¢æ¡†ï¼Œæœç´¢è”æƒ³åŠŸèƒ½</li>
<li>é«˜é¢‘ç‚¹å‡»æäº¤ï¼Œè¡¨å•é‡å¤æäº¤</li>
</ul>
<h2 id="å®ç°åŸç†åŠä»£ç å°è£…"><a href="#å®ç°åŸç†åŠä»£ç å°è£…" class="headerlink" title="å®ç°åŸç†åŠä»£ç å°è£…"></a>å®ç°åŸç†åŠä»£ç å°è£…</h2><p>ä»¥é¡µé¢å…ƒç´ æ»šåŠ¨ç›‘å¬çš„ä¾‹å­ï¼Œæ¥è¿›è¡Œè§£æï¼š</p>
<p><strong>å‡½æ•°èŠ‚æµï¼šè§„å®šå»¶è¿Ÿæ—¶é—´ï¼ˆdelayï¼‰å†…åªæ‰§è¡Œæœ€å¼€å§‹è§¦å‘çš„å‡½æ•°</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å‡½æ•°èŠ‚æµ</span><br><span class="hljs-keyword">let</span> canRun = <span class="hljs-literal">true</span>;<br><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å·²ç©ºé—²ï¼Œå¦‚æœåœ¨æ‰§è¡Œä¸­ï¼Œåˆ™ç›´æ¥return</span><br>    <span class="hljs-keyword">if</span>(!canRun) <span class="hljs-keyword">return</span>;<br>    canRun = <span class="hljs-literal">false</span>;<br>    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"å‡½æ•°èŠ‚æµ"</span>);<br>        canRun = <span class="hljs-literal">true</span>;<br>    &#125;, <span class="hljs-number">300</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>å°è£…ä¸€ä¸‹åæ˜¯è¿™æ ·çš„ï¼š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> throttle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn,delay</span>) </span>&#123;<br>    <span class="hljs-keyword">let</span> canRun = <span class="hljs-literal">true</span>;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">const</span> context = <span class="hljs-keyword">this</span><br>    <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">arguments</span>;<br>        <span class="hljs-keyword">if</span>(!canRun) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ³¨æ„ï¼Œè¿™é‡Œä¸èƒ½ç”¨timeræ¥åšæ ‡è®°ï¼Œå› ä¸ºsetTimeoutä¼šè¿”å›ä¸€ä¸ªå®šæ—¶å™¨id</span><br>        canRun = <span class="hljs-literal">false</span>;<br>    setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>        fn.apply(context,args) <br>        canRun = <span class="hljs-literal">true</span>;<br>    &#125;,delay)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å‡½æ•°é˜²æŠ–ï¼šä¸Šä¸ªå‡½æ•°åœ¨è§„å®šå»¶è¿Ÿæ—¶é—´ï¼ˆdelayï¼‰å†…æœªå¼€å§‹æ‰§è¡Œå°±æ¥è¿è§¦å‘çš„å‡½æ•°åªæ‰§è¡Œæœ€åè§¦å‘çš„å‡½æ•°</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å‡½æ•°é˜²æŠ–</span><br><span class="hljs-keyword">let</span> timer = <span class="hljs-literal">false</span>;<br><span class="hljs-built_in">document</span>.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>    clearTimeout(timer); <span class="hljs-comment">// æ¸…é™¤æœªæ‰§è¡Œçš„ä»£ç ï¼Œé‡ç½®å›åˆå§‹åŒ–çŠ¶æ€</span><br>    timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;<br>        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"å‡½æ•°é˜²æŠ–"</span>);<br>    &#125;, <span class="hljs-number">300</span>);<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>å°è£…ä¸€ä¸‹æ˜¯è¿™æ ·çš„ï¼š</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> debounce = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">fn, delay</span>) </span>&#123;<br>  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br>  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;<br>    <span class="hljs-keyword">const</span> context = <span class="hljs-keyword">this</span><br>    <span class="hljs-keyword">let</span> args = <span class="hljs-built_in">arguments</span><br>    clearTimeout(timer) <span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨debounceå‡½æ•°éƒ½ä¼šå°†å‰ä¸€æ¬¡çš„timeræ¸…ç©ºï¼Œç¡®ä¿åªæ‰§è¡Œä¸€æ¬¡</span><br>    timer = setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>      fn.apply(context, args)<br>    &#125;, delay)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>å‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨ React Hooks å®ç° èµ/è¸© åŠŸèƒ½</title>
    <url>/2020/07/04/zc/</url>
    <content><![CDATA[<figure class="highlight jsx"><table><tr><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> React, &#123; useReducer, useState &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span><br><span class="hljs-keyword">import</span> &#123; render &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">'./app.css'</span><br><br><span class="hljs-keyword">const</span> App = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> appReducer = <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">switch</span> (action.type) &#123;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">'HANDLE_LIKE'</span>:<br>        <span class="hljs-keyword">return</span> &#123;<br>          ...state,<br>          countLikes: state.countLikes + action.payload<br>        &#125;<br>      <span class="hljs-keyword">case</span> <span class="hljs-string">'HANDLE_DISLIKE'</span>:<br>        <span class="hljs-keyword">return</span> &#123;<br>          ...state,<br>          countDislikes: state.countDislikes + action.payload<br>        &#125;<br>      <span class="hljs-keyword">default</span>:<br>        <span class="hljs-keyword">return</span> state<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">const</span> initailState = &#123;<br>    countLikes: <span class="hljs-number">65</span>,<br>    countDislikes: <span class="hljs-number">5</span>,<br>  &#125;<br>  <span class="hljs-keyword">const</span> [state, dispatch] = useReducer(appReducer, initailState)<br>  <span class="hljs-keyword">const</span> &#123; countLikes, countDislikes &#125; = state<br>  <span class="hljs-keyword">const</span> [status, setStatus] = useState(<span class="hljs-literal">null</span>)<br>  <span class="hljs-keyword">const</span> handleClickLike = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'like'</span>) &#123;<br>      setStatus(<span class="hljs-literal">null</span>)<br>      dispatch(&#123;<br>        type: <span class="hljs-string">'HANDLE_LIKE'</span>,<br>        payload: <span class="hljs-number">-1</span>,<br>      &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      setStatus(<span class="hljs-string">'like'</span>)<br>      <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'dislike'</span>) &#123;<br>        dispatch(&#123;<br>          type: <span class="hljs-string">'HANDLE_DISLIKE'</span>,<br>          payload: <span class="hljs-number">-1</span>,<br>        &#125;)<br>      &#125;<br>      dispatch(&#123;<br>        type: <span class="hljs-string">'HANDLE_LIKE'</span>,<br>        payload: <span class="hljs-number">1</span>,<br>      &#125;)<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">const</span> handleClickDisLike = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'dislike'</span>) &#123;<br>      setStatus(<span class="hljs-literal">null</span>)<br>      dispatch(&#123;<br>        type: <span class="hljs-string">"HANDLE_DISLIKE"</span>,<br>        payload: <span class="hljs-number">-1</span>,<br>      &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      setStatus(<span class="hljs-string">'dislike'</span>)<br>      <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'like'</span>) &#123;<br>        dispatch(&#123;<br>          type: <span class="hljs-string">'HANDLE_LIKE'</span>,<br>          payload: <span class="hljs-number">-1</span><br>        &#125;)<br>      &#125;<br>      dispatch(&#123;<br>        type: <span class="hljs-string">'HANDLE_DISLIKE'</span>,<br>        payload: <span class="hljs-number">1</span>,<br>      &#125;)<br>    &#125;<br>  &#125;<br>  <span class="hljs-keyword">return</span> (<br>    &lt;div className=<span class="hljs-string">"container"</span>&gt;<br>      &lt;button className=&#123;status === <span class="hljs-string">'like'</span> ? <span class="hljs-string">'btn active'</span> : <span class="hljs-string">'btn'</span>&#125; onClick=&#123;handleClickLike&#125;&gt;<br>        èµ<br>  &lt;span&gt;&#123;countLikes&#125;&lt;<span class="hljs-regexp">/span&gt;</span><br><span class="hljs-regexp">      &lt;/</span>button&gt;<br>      &lt;button className=&#123;status === <span class="hljs-string">'dislike'</span> ? <span class="hljs-string">'btn active'</span> : <span class="hljs-string">'btn'</span>&#125; onClick=&#123;handleClickDisLike&#125;&gt;<br>        è¸©<br>  &lt;span&gt;&#123;countDislikes&#125;&lt;<span class="hljs-regexp">/span&gt;</span><br><span class="hljs-regexp">      &lt;/</span>button&gt;<br>    &lt;<span class="hljs-regexp">/div&gt;</span><br><span class="hljs-regexp">  )</span><br><span class="hljs-regexp">&#125;</span><br><span class="hljs-regexp"></span><br><span class="hljs-regexp">render(&lt;App /</span>&gt;, <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#root'</span>))<br></code></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.container</span>&#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: center;<br>  <span class="hljs-attribute">align-items</span>: center;<br>&#125;<br><br><span class="hljs-selector-class">.btn</span> &#123;<br>  <span class="hljs-attribute">cursor</span>: pointer;<br>  <span class="hljs-attribute">border</span>: none;<br>  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span> <span class="hljs-number">20px</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;<br>  <span class="hljs-attribute">background-color</span>: transparent;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#74777d</span>;<br>  <span class="hljs-attribute">outline</span>: none;<br>&#125;<br><br><span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:first-of-type</span>&#123;<br>  <span class="hljs-attribute">border-right</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#74777d</span>;<br>&#125;<br><br><span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span>&#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#282a2e</span>;<br>&#125;<br><br><span class="hljs-selector-tag">span</span> &#123;<br>  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">6px</span>;<br>&#125;<br><br><span class="hljs-selector-class">.active</span>, <span class="hljs-selector-class">.active</span><span class="hljs-selector-pseudo">:hover</span> &#123;<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#1b81f5</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>React</tag>
      </tags>
  </entry>
</search>
